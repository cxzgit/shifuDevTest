Industrial Environmental Sensor Model X100 HTTP Driver (Modbus RTU to HTTP)

Overview
- This driver connects to the X100 over Modbus RTU (RS-485) and polls temperature, humidity, and PM2.5 every configured interval.
- It exposes a single HTTP endpoint to retrieve the latest readings as JSON.
- The driver validates Modbus CRC and retries communication failures up to the configured limit.
- Background polling includes timeout handling, retries, exponential backoff on failures, and logs key events.

HTTP API
- GET /readings
  - Returns JSON with the most recent successful poll:
    - timestamp: ISO8601 UTC
    - temperature_c: Celsius
    - humidity_rh: Percent RH
    - pm25_ugm3: micrograms per cubic meter
    - status: "ok" on success

Environment Variables (required)
- HTTP_HOST: IPv4 address to bind (e.g., 0.0.0.0)
- HTTP_PORT: Port to listen on (e.g., 8080)
- SERIAL_PORT: Serial device path (e.g., /dev/ttyUSB0)
- MODBUS_ADDR: Sensor Modbus address (1..247), default device is 1
- BAUD_RATE: 1200,2400,4800,9600,19200,38400,57600,115200 (use 9600 for X100 default)
- DATA_BITS: 7 or 8 (X100 default is 8)
- PARITY: N, E, or O (X100 default is N)
- STOP_BITS: 1 or 2 (X100 default is 1)
- POLL_INTERVAL_SEC: Poll interval in seconds (set 5 to meet device spec)
- REQUEST_TIMEOUT_MS: Serial request timeout in milliseconds (e.g., 500)
- RETRY_LIMIT: Max retries per poll cycle on failure (set 3 to meet device spec)
- BACKOFF_INITIAL_MS: Initial backoff on failure (e.g., 500)
- BACKOFF_MAX_MS: Maximum backoff on repeated failures (e.g., 5000)

Build
- Requires g++ and POSIX environment.
- Run: make

Run
- Example:
  HTTP_HOST=0.0.0.0 \
  HTTP_PORT=8080 \
  SERIAL_PORT=/dev/ttyUSB0 \
  MODBUS_ADDR=1 \
  BAUD_RATE=9600 \
  DATA_BITS=8 \
  PARITY=N \
  STOP_BITS=1 \
  POLL_INTERVAL_SEC=5 \
  REQUEST_TIMEOUT_MS=500 \
  RETRY_LIMIT=3 \
  BACKOFF_INITIAL_MS=500 \
  BACKOFF_MAX_MS=5000 \
  ./driver

Test with curl
- curl http://localhost:8080/readings

Notes
- The driver assumes the sensor exposes 32-bit IEEE-754 floats across two input registers each, big-endian register order:
  - Temperature: 0x0001 (2 registers)
  - Humidity:    0x0003 (2 registers)
  - PM2.5:       0x0005 (2 registers)
- If your device uses a different encoding (e.g., scaled integers), adapt the decode in driver.cpp accordingly.

Generated by [IoT Driver Copilot](https://copilot.test.shifu.dev/)