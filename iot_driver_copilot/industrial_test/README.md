Industrial Temperature & Humidity Sensor HTTP Driver

Overview
- Connects to a Modbus TCP temperature/humidity sensor, polls readings, and exposes them over an HTTP REST API.
- Periodic poll with resiliency: timeout, configurable retry count, and exponential backoff on failures.
- Maintains a thread-safe buffer of the latest reading and returns it quickly via HTTP.
- Logs key events: connect/disconnect, retries, errors, and last-update timestamps.

Requirements
- Python 3.8+
- Network access to the Modbus TCP device

Environment Variables (required)
- HTTP_HOST: Host/IP for HTTP server (e.g., 0.0.0.0)
- HTTP_PORT: Port for HTTP server (e.g., 8080)
- MODBUS_HOST: Sensor IP (e.g., 192.168.1.50)
- MODBUS_PORT: Sensor Modbus TCP port (typically 502)
- MODBUS_UNIT_ID: Modbus unit/slave ID (e.g., 1)
- SAMPLING_INTERVAL_SECONDS: Poll interval seconds (set to 5 for requirement)
- RETRY_COUNT: Number of retry attempts per poll cycle (e.g., 3)
- TIMEOUT_MS: Socket timeout in milliseconds for Modbus operations (e.g., 1000)
- BACKOFF_INITIAL_SECONDS: Initial backoff seconds on failure (e.g., 1)
- BACKOFF_MAX_SECONDS: Maximum backoff seconds (e.g., 30)
- REG_TEMP_ADDR: Holding register address for temperature (e.g., 100)
- REG_HUM_ADDR: Holding register address for humidity (e.g., 101)
- REG_STATUS_ADDR: Holding register address for device status (e.g., 102)
- ALARM_TEMP_LOW: Low temperature alarm threshold (°C)
- ALARM_TEMP_HIGH: High temperature alarm threshold (°C)
- ALARM_HUM_LOW: Low humidity alarm threshold (% RH)
- ALARM_HUM_HIGH: High humidity alarm threshold (% RH)
- LOG_LEVEL: Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)

Notes
- Temperature is interpreted as signed 16-bit integer from a single holding register. Humidity is interpreted as an unsigned 16-bit integer. If your sensor uses scaling (e.g., value*100), convert via register configuration or adapt upstream.
- The driver reads one register each for temperature, humidity, and device status. Provide correct addresses via environment variables.

Run
1) Set environment variables, for example:
   export HTTP_HOST=0.0.0.0
   export HTTP_PORT=8080
   export MODBUS_HOST=192.168.1.50
   export MODBUS_PORT=502
   export MODBUS_UNIT_ID=1
   export SAMPLING_INTERVAL_SECONDS=5
   export RETRY_COUNT=3
   export TIMEOUT_MS=1000
   export BACKOFF_INITIAL_SECONDS=1
   export BACKOFF_MAX_SECONDS=30
   export REG_TEMP_ADDR=100
   export REG_HUM_ADDR=101
   export REG_STATUS_ADDR=102
   export ALARM_TEMP_LOW=-10
   export ALARM_TEMP_HIGH=60
   export ALARM_HUM_LOW=20
   export ALARM_HUM_HIGH=80
   export LOG_LEVEL=INFO

2) Start the driver:
   python3 driver.py

HTTP API
- GET /readings
  Returns latest temperature (°C), humidity (% RH), and timestamp from last successful poll.
  curl -s http://localhost:8080/readings

- GET /config
  Returns current runtime driver configuration: sampling interval, alarm thresholds, and communication settings.
  curl -s http://localhost:8080/config

- GET /status
  Returns driver and connection status, including connected flag, last poll time, retry count, timeout, and recent error summary.
  curl -s http://localhost:8080/status

Generated by [IoT Driver Copilot](https://copilot.test.shifu.dev/)